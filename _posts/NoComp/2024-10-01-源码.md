---
layout: post
title: "源码"
date: 2021-04-18 09:00:00 +0800 
categories: 未整理
tag: 未整理
---
* content
{:toc #markdown-toc}

这是随手记得，很杂，在做的过程中一直改，还未整理，仅供参考

<!-- more -->

# Ticker

原：`FTicker`，现：`FTSTicker`(即: Thread Safe)

一、

使用目的一为了不在异步线程中调用回调函数而先回到主线程再调用回调函数来确保安全性`D:\UE5_3_release\UnrealEngine\Engine\Source\Runtime\Engine\Private\SaveGameSystem.cpp`

```c++
void ISaveGameSystem::OnAsyncComplete(TFunction<void()> Callback)
{
	// NB. Using Ticker because AsyncTask may run during async package loading which may not be suitable for save data
	FTSTicker::GetCoreTicker().AddTicker(FTickerDelegate::CreateLambda(
		[Callback = MoveTemp(Callback)](float) -> bool
		{
			Callback();
			return false;
		}
	));
}
```

二、

需要注意的是此Tick是被`TickEngine`所调用，因此可能即使游戏在编辑器中停止，该函数也不会停止被调用，它仍会继续运行。
所以要么这就是你期望的，要么需要一个东西来动态的管理他的生命周期